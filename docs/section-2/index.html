<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Section 2 : Ma√Ætriser le Prompt Engineering pour la QA</title>
    <link rel="stylesheet" href="../assets/style.css" />
  </head>
  <body>
    <nav>
      <div class="container">
        <div class="nav-title">Formation QA & IA G√©n√©rative</div>
        <ul>
          <li><a href="../../index.html">Accueil</a></li>
          <li><a href="../section-1/index.html">Section 1</a></li>
          <li><a href="#" class="active">Section 2</a></li>
          <li><a href="../section-3/index.html">Section 3</a></li>
          <li><a href="../section-4/index.html">Section 4</a></li>
        </ul>
      </div>
    </nav>

    <header>
      <div class="container">
        <h1>üéØ Section 2 : Ma√Ætriser le Prompt Engineering pour la QA</h1>
        <p class="subtitle">Dur√©e : 90 minutes</p>
      </div>
    </header>

    <main>
      <div class="container">
        <!-- HERO SECTION -->
        <section class="hero">
          <h2>Pourquoi cette section ?</h2>
          <p>
            Ma√Ætriser l'art du prompt engineering pour transformer l'IA en 
            v√©ritable partenaire : obtenir des r√©sultats pr√©cis, coh√©rents 
            et adapt√©s √† vos besoins QA sp√©cifiques.
          </p>
        </section>

        <section class="objectives-section">
        <h2>üéØ Objectifs de cette Section</h2>
        <p class="intro-text">
          √Ä l'issue de cette section, vous serez capable de :
        </p>
        <div class="objectives-list">
          <div class="objective-item">
            <span class="objective-icon">üìê</span>
            <div class="objective-content">
              <strong>Anatomie d'un prompt efficace</strong> ‚Äî Ma√Ætriser les 5
              composantes essentielles (R√¥le, T√¢che, Contexte, Contraintes,
              Format)
            </div>
          </div>
          <div class="objective-item">
            <span class="objective-icon">üß†</span>
            <div class="objective-content">
              <strong>Chain-of-Thought</strong> ‚Äî Faire expliciter le
              raisonnement √©tape par √©tape pour r√©soudre des probl√®mes complexes
            </div>
          </div>
          <div class="objective-item">
            <span class="objective-icon">üìö</span>
            <div class="objective-content">
              <strong>Few-Shot Learning</strong> ‚Äî Guider l'IA avec des exemples
              concrets pour garantir un format pr√©cis et coh√©rent
            </div>
          </div>
          <div class="objective-item">
            <span class="objective-icon">üîó</span>
            <div class="objective-content">
              <strong>Prompt Chaining</strong> ‚Äî D√©composer une t√¢che complexe
              en sous-prompts s√©quentiels pour des r√©sultats modulaires
            </div>
          </div>
        </div>
      </section>

      <!-- MODULE 2.1 : ANATOMIE D'UN PROMPT EFFICACE -->
      <section class="mt-xl">
        <h2>üìê Module 2.1 : Anatomie d'un Prompt Efficace (20 min)</h2>

        <div class="card highlight">
          <h3>Les 5 Composantes Essentielles</h3>
          <p>
            Un prompt de qualit√© professionnelle se compose de 5 √©l√©ments
            structurants :
          </p>
          <table>
            <thead>
              <tr>
                <th>Composante</th>
                <th>Description</th>
                <th>Exemple</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>üîµ <strong>R√¥le</strong></td>
                <td>D√©finit l'expertise et le contexte professionnel</td>
                <td>"Tu es un ing√©nieur QA senior sp√©cialis√© en tests E2E"</td>
              </tr>
              <tr>
                <td>üü¢ <strong>T√¢che</strong></td>
                <td>L'action pr√©cise √† r√©aliser</td>
                <td>"G√©n√®re un test Cypress pour la connexion Redmine"</td>
              </tr>
              <tr>
                <td>üü° <strong>Contexte</strong></td>
                <td>Informations techniques n√©cessaires</td>
                <td>"TypeScript, Page Object Model, API REST Redmine"</td>
              </tr>
              <tr>
                <td>üî¥ <strong>Contraintes</strong></td>
                <td>R√®gles et limites √† respecter</td>
                <td>"Utilise uniquement data-test-id, pas de XPath"</td>
              </tr>
              <tr>
                <td>üü£ <strong>Format</strong></td>
                <td>Structure de sortie attendue</td>
                <td>"Format JSON avec cl√©s : iban, valide, raison"</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- 2.1.A : R√îLE/PERSONA -->
        <div class="card success mt-lg">
          <h3>A. R√¥le/Persona : L'Impact du Contexte Professionnel</h3>
          <p>
            D√©finir le r√¥le transforme radicalement la qualit√© et la pertinence
            de la r√©ponse. Observons l'impact du <strong>R√¥le seul</strong> :
          </p>

          <div class="grid mt-md">
            <div class="card warning">
              <h4>‚ùå Sans R√¥le</h4>
              <p>
                <em
                  >"Cr√©e une classe Page Object pour la page de connexion
                  Redmine"</em
                >
              </p>
              <p><strong>Probl√®mes :</strong></p>
              <ul>
                <li>R√©ponse g√©n√©rique, peu contextualis√©e</li>
                <li>S√©lecteurs fragiles (classes CSS, XPath)</li>
                <li>Pas de bonnes pratiques professionnelles</li>
                <li>Code minimal, non idiomatique</li>
              </ul>
            </div>

            <div class="card success">
              <h4>‚úÖ Avec R√¥le Uniquement</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt avec R√¥le
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un ing√©nieur QA senior avec 8 ans d'exp√©rience en
                    automatisation de tests E2E. Tu ma√Ætrises parfaitement
                    Cypress, TypeScript et le Page Object Model. Tu appliques
                    toujours les meilleures pratiques de l'industrie.
                  </p>
                </div>
                <p class="mt-md">
                  <em
                    >Cr√©e une classe Page Object pour la page de connexion
                    Redmine</em
                  >
                </p>
              </div>

              <p class="mt-md"><strong>Am√©lioration visible :</strong></p>
              <ul>
                <li>‚úÖ Ton professionnel, vocabulaire expert</li>
                <li>‚úÖ Structure TypeScript idiomatique</li>
                <li>‚úÖ M√©thodes chainables (best practice)</li>
                <li>‚úÖ JSDoc automatiquement ajout√©</li>
              </ul>
            </div>
          </div>

          <div class="card info mt-md">
            <h4>üí° Le√ßon Cl√©</h4>
            <p>
              Le r√¥le <strong>active le bon "mode d'expertise"</strong> de l'IA.
              Sans r√¥le, l'IA r√©pond en mode g√©n√©raliste. Avec un r√¥le QA
              senior, elle applique automatiquement les standards du m√©tier.
            </p>
          </div>
        </div>

        <!-- 2.1.B : T√ÇCHE -->
        <div class="card mt-lg">
          <h3>B. T√¢che : La Clart√© de l'Intention</h3>
          <p>
            Une t√¢che bien formul√©e est
            <strong>sp√©cifique, mesurable et actionnable</strong>. Ajoutons
            maintenant une <strong>T√¢che claire</strong> au R√¥le √©tabli en A :
          </p>

          <div class="grid mt-md">
            <div class="card warning">
              <h4>‚ùå R√¥le + T√¢che Vague</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt Incomplet
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un ing√©nieur QA senior avec 8 ans d'exp√©rience en
                    automatisation de tests E2E.
                  </p>
                </div>
                <div
                  style="
                    background: #ffebee;
                    border-left: 4px solid #f44336;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü¢ T√¢che (Vague)</h4>
                  <p>
                    <em>"Cr√©e un test pour la page de connexion Redmine"</em>
                  </p>
                </div>
              </div>
              <p class="mt-md"><strong>Probl√®mes :</strong></p>
              <ul>
                <li>Type de test non pr√©cis√© (unitaire ? E2E ? POM ?)</li>
                <li>
                  Framework/langage inconnu (Cypress ? Selenium ? Java ?
                  TypeScript ?)
                </li>
                <li>
                  P√©rim√®tre flou (tous les champs ? juste connexion r√©ussie ?)
                </li>
                <li>
                  Pas de sp√©cification des m√©thodes ou de la structure attendue
                </li>
              </ul>
            </div>

            <div class="card success">
              <h4>‚úÖ R√¥le + T√¢che Claire</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt Am√©lior√©
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un ing√©nieur QA senior avec 8 ans d'exp√©rience en
                    automatisation de tests E2E. Tu ma√Ætrises parfaitement
                    Cypress, TypeScript et le Page Object Model. Tu appliques
                    toujours les meilleures pratiques de l'industrie.
                  </p>
                </div>
                <div
                  style="
                    background: #e8f5e9;
                    border-left: 4px solid #4caf50;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü¢ T√¢che (Pr√©cise)</h4>
                  <p>
                    <strong
                      >G√©n√®re une classe Page Object TypeScript compl√®te pour la
                      page de connexion Redmine</strong
                    >
                    avec les m√©thodes suivantes : <code>visit()</code>,
                    <code>fillUsername()</code>, <code>fillPassword()</code>,
                    <code>submit()</code>, <code>clickLostPassword()</code>.
                  </p>
                </div>
              </div>
              <p class="mt-md"><strong>Am√©lioration :</strong></p>
              <ul>
                <li>‚úÖ Livrable d√©fini (classe Page Object)</li>
                <li>‚úÖ Langage sp√©cifi√© (TypeScript)</li>
                <li>‚úÖ M√©thodes explicites (5 m√©thodes nomm√©es)</li>
                <li>‚úÖ P√©rim√®tre clair (page de connexion uniquement)</li>
                <li>
                  ‚úÖ Fonctionnalit√©s r√©elles (lien mot de passe perdu inclus)
                </li>
              </ul>
            </div>
          </div>

          <div class="card info mt-md">
            <h4>üí° Formule Gagnante pour une T√¢che Claire</h4>
            <p>
              <strong
                >Verbe d'action + Livrable pr√©cis + Crit√®res de succ√®s</strong
              >
            </p>
            <ul>
              <li>
                <strong>Verbe :</strong> G√©n√®re, Cr√©e, Analyse, Identifie,
                Corrige, Refactorise
              </li>
              <li>
                <strong>Livrable :</strong> Type exact (classe POM, test E2E,
                sc√©nario Gherkin)
              </li>
              <li>
                <strong>Crit√®res :</strong> M√©thodes requises, format,
                contraintes techniques
              </li>
            </ul>
            <p class="mt-md"><em>Exemples de t√¢ches bien formul√©es :</em></p>
            <ul class="success-list">
              <li>
                "G√©n√®re 10 IBANs fran√ßais valides avec checksums corrects"
              </li>
              <li>
                "Cr√©e 5 sc√©narios Gherkin couvrant les cas limites de validation
                de montant"
              </li>
              <li>
                "Analyse ces 50 lignes de logs et identifie la cause racine de
                l'erreur 500"
              </li>
            </ul>
          </div>
        </div>

        <!-- 2.1.C : CONTEXTE -->
        <div class="card mt-lg">
          <h3>C. Contexte : Le Carburant de la Pr√©cision</h3>
          <p>
            Le contexte transforme une r√©ponse g√©n√©rique en solution sur-mesure.
            Ajoutons le <strong>Contexte technique</strong> au R√¥le + T√¢che :
          </p>

          <div class="grid mt-md">
            <div class="card warning">
              <h4>‚ùå R√¥le + T√¢che Sans Contexte</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt Sans Contexte
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un ing√©nieur QA senior avec 8 ans d'exp√©rience en
                    automatisation de tests E2E. Tu ma√Ætrises parfaitement
                    Cypress, TypeScript et le Page Object Model. Tu appliques
                    toujours les meilleures pratiques de l'industrie.
                  </p>
                </div>
                <div
                  style="
                    background: #e8f5e9;
                    border-left: 4px solid #4caf50;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü¢ T√¢che</h4>
                  <p>
                    G√©n√®re une classe Page Object TypeScript compl√®te pour la
                    page de connexion Redmine avec les m√©thodes suivantes :
                    <code>visit()</code>, <code>fillUsername()</code>,
                    <code>fillPassword()</code>, <code>submit()</code>,
                    <code>clickLostPassword()</code>.
                  </p>
                </div>
              </div>
              <p class="mt-md"><strong>Probl√®me :</strong></p>
              <ul>
                <li>‚ö†Ô∏è L'IA va deviner la structure HTML</li>
                <li>
                  ‚ö†Ô∏è S√©lecteurs probablement incorrects (#email au lieu de
                  #username)
                </li>
                <li>
                  ‚ö†Ô∏è Code g√©n√©rique, pas adapt√© √† votre application r√©elle
                </li>
              </ul>
            </div>

            <div class="card success">
              <h4>‚úÖ R√¥le + T√¢che + Contexte</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt Avec Contexte
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un ing√©nieur QA senior avec 8 ans d'exp√©rience en
                    automatisation de tests E2E. Tu ma√Ætrises parfaitement
                    Cypress, TypeScript et le Page Object Model. Tu appliques
                    toujours les meilleures pratiques de l'industrie.
                  </p>
                </div>
                <div
                  style="
                    background: #e8f5e9;
                    border-left: 4px solid #4caf50;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü¢ T√¢che</h4>
                  <p>
                    G√©n√®re une classe Page Object TypeScript compl√®te pour la
                    page de connexion Redmine avec les m√©thodes suivantes :
                    <code>visit()</code>, <code>fillUsername()</code>,
                    <code>fillPassword()</code>, <code>submit()</code>,
                    <code>clickLostPassword()</code>.
                  </p>
                </div>
                <div
                  style="
                    background: #fff9c4;
                    border-left: 4px solid #ffeb3b;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü° Contexte</h4>
                  <p>
                    <strong>Application :</strong> Redmine 5.x (Ruby on Rails)
                  </p>
                  <p><strong>Stack :</strong> Cypress 13 + TypeScript 5</p>
                  <p>
                    <strong>Voici le code HTML r√©el du formulaire :</strong>
                  </p>
                  <pre
                    style="
                      background: #1e1e1e;
                      padding: 1rem;
                      border-radius: 4px;
                      overflow-x: auto;
                      font-size: 0.85em;
                    "
                  ><code style="color: #d4d4d4;">&lt;form onsubmit="return keepAnchorOnSignIn(this);" action="/login" method="post"&gt;
  &lt;input type="hidden" name="authenticity_token" value="..." /&gt;
  &lt;input type="hidden" name="back_url" value="/" /&gt;
  
  &lt;label for="username"&gt;Identifiant&lt;/label&gt;
  &lt;input type="text" name="username" id="username" tabindex="1" autofocus /&gt;
  
  &lt;label for="password"&gt;
    Mot de passe
    &lt;a class="lost_password" href="/account/lost_password"&gt;Mot de passe perdu&lt;/a&gt;
  &lt;/label&gt;
  &lt;input type="password" name="password" id="password" tabindex="2" /&gt;
  
  &lt;input type="submit" name="login" value="Connexion" tabindex="5" id="login-submit" /&gt;
&lt;/form&gt;</code></pre>
                </div>
              </div>
              <p class="mt-md"><strong>Am√©lioration :</strong></p>
              <ul>
                <li>
                  ‚úÖ S√©lecteurs <strong>exacts</strong> :
                  <code>#username</code>, <code>#password</code>,
                  <code>#login-submit</code>, <code>.lost_password</code>
                </li>
                <li>
                  ‚úÖ M√©thodes adapt√©es au DOM r√©el (pas de champ "email", mais
                  lien "Mot de passe perdu")
                </li>
                <li>
                  ‚úÖ Code imm√©diatement fonctionnel, pas de debug n√©cessaire
                </li>
                <li>
                  ‚úÖ Gestion des champs cach√©s (authenticity_token, back_url)
                </li>
              </ul>
            </div>
          </div>

          <div class="card info mt-md">
            <h4>üéØ Types de Contexte √† Fournir</h4>
            <div class="grid mt-md">
              <div class="card">
                <h4>üèóÔ∏è Architecture</h4>
                <ul>
                  <li>Framework : Cypress, Playwright</li>
                  <li>Langage : TypeScript, Python</li>
                  <li>Pattern : Page Object Model</li>
                </ul>
              </div>
              <div class="card">
                <h4>üåê Application</h4>
                <ul>
                  <li>Structure HTML r√©elle</li>
                  <li>API endpoints</li>
                  <li>R√®gles m√©tier</li>
                </ul>
              </div>
              <div class="card">
                <h4>üîß Configuration</h4>
                <ul>
                  <li>Fichiers : tsconfig.json</li>
                  <li>Plugins install√©s</li>
                  <li>Conventions de nommage</li>
                </ul>
              </div>
            </div>
            <p class="mt-md">
              <strong>R√®gle d'or :</strong> Ne jamais pr√©sumer que l'IA conna√Æt
              votre environnement. Fournissez le HTML/API/Config r√©els pour des
              s√©lecteurs pr√©cis garantis.
            </p>
          </div>
        </div>

        <!-- 2.1.D : CONTRAINTES -->
        <div class="card mt-lg">
          <h3>D. Contraintes : Le Garde-Fou de la Qualit√©</h3>
          <p>
            Les contraintes transforment du code fonctionnel en code
            <strong>maintenable, s√©curis√© et conforme</strong>. Ajoutons les
            <strong>Contraintes</strong>
            qui guident l'IA vers les meilleures pratiques de votre √©quipe :
          </p>

          <div class="grid mt-md">
            <div class="card warning">
              <h4>‚ùå R√¥le + T√¢che + Contexte Sans Contraintes</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt Sans Contraintes
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un ing√©nieur QA senior avec 8 ans d'exp√©rience en
                    automatisation de tests E2E. Tu ma√Ætrises parfaitement
                    Cypress, TypeScript et le Page Object Model. Tu appliques
                    toujours les meilleures pratiques de l'industrie.
                  </p>
                </div>
                <div
                  style="
                    background: #e8f5e9;
                    border-left: 4px solid #4caf50;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü¢ T√¢che</h4>
                  <p>
                    G√©n√®re une classe Page Object TypeScript compl√®te pour la
                    page de connexion Redmine avec les m√©thodes suivantes :
                    <code>visit()</code>, <code>fillUsername()</code>,
                    <code>fillPassword()</code>, <code>submit()</code>,
                    <code>clickLostPassword()</code>.
                  </p>
                </div>
                <div
                  style="
                    background: #fff9c4;
                    border-left: 4px solid #ffeb3b;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü° Contexte</h4>
                  <p>
                    <strong>Application :</strong> Redmine 5.x (Ruby on Rails)
                  </p>
                  <p><strong>Stack :</strong> Cypress 13 + TypeScript 5</p>
                  <p>
                    <strong
                      >Voici le code HTML r√©el du formulaire (extrait
                      simplifi√©).</strong
                    >
                  </p>
                </div>
              </div>
              <p class="mt-md"><strong>Probl√®me :</strong></p>
              <ul>
                <li>
                  ‚ö†Ô∏è L'IA utilise peut-√™tre des s√©lecteurs non-standards
                  (.class, XPath)
                </li>
                <li>‚ö†Ô∏è Pas de gestion d'erreurs</li>
                <li>‚ö†Ô∏è Architecture non conforme aux standards de l'√©quipe</li>
              </ul>
            </div>

            <div class="card success">
              <h4>‚úÖ R√¥le + T√¢che + Contexte + Contraintes</h4>
              <button class="collapsible-btn" onclick="toggleCollapsible(this)">
                üìã Voir le Prompt Avec Contraintes
              </button>
              <div class="collapsible-content">
                <div style="text-align: right; margin-bottom: 0.5rem">
                  <button
                    onclick="copyPrompt(this)"
                    style="
                      background: #2196f3;
                      color: white;
                      border: none;
                      padding: 0.5rem 1rem;
                      border-radius: 4px;
                      cursor: pointer;
                      font-size: 0.9em;
                    "
                  >
                    üìã Copier le prompt
                  </button>
                </div>
                <div
                  style="
                    background: #e3f2fd;
                    border-left: 4px solid #2196f3;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üîµ R√¥le</h4>
                  <p>
                    Tu es un ing√©nieur QA senior avec 8 ans d'exp√©rience en
                    automatisation de tests E2E. Tu ma√Ætrises parfaitement
                    Cypress, TypeScript et le Page Object Model. Tu appliques
                    toujours les meilleures pratiques de l'industrie.
                  </p>
                </div>
                <div
                  style="
                    background: #e8f5e9;
                    border-left: 4px solid #4caf50;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü¢ T√¢che</h4>
                  <p>
                    G√©n√®re une classe Page Object TypeScript compl√®te pour la
                    page de connexion Redmine avec les m√©thodes suivantes :
                    <code>visit()</code>, <code>fillUsername()</code>,
                    <code>fillPassword()</code>, <code>submit()</code>,
                    <code>clickLostPassword()</code>.
                  </p>
                </div>
                <div
                  style="
                    background: #fff9c4;
                    border-left: 4px solid #ffeb3b;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üü° Contexte</h4>
                  <p>
                    <strong>Application :</strong> Redmine 5.x (Ruby on Rails)
                  </p>
                  <p><strong>Stack :</strong> Cypress 13 + TypeScript 5</p>
                  <p>
                    <strong>Voici le code HTML r√©el du formulaire :</strong>
                  </p>
                  <pre
                    style="
                      background: #1e1e1e;
                      padding: 1rem;
                      border-radius: 4px;
                      overflow-x: auto;
                      font-size: 0.85em;
                    "
                  ><code style="color: #d4d4d4;">&lt;form onsubmit="return keepAnchorOnSignIn(this);" action="/login" method="post"&gt;
  &lt;input type="hidden" name="authenticity_token" value="..." /&gt;
  &lt;input type="hidden" name="back_url" value="/" /&gt;
  
  &lt;label for="username"&gt;Identifiant&lt;/label&gt;
  &lt;input type="text" name="username" id="username" tabindex="1" autofocus /&gt;
  
  &lt;label for="password"&gt;
    Mot de passe
    &lt;a class="lost_password" href="/account/lost_password"&gt;Mot de passe perdu&lt;/a&gt;
  &lt;/label&gt;
  &lt;input type="password" name="password" id="password" tabindex="2" /&gt;
  
  &lt;input type="submit" name="login" value="Connexion" tabindex="5" id="login-submit" /&gt;
&lt;/form&gt;</code></pre>
                </div>
                <div
                  style="
                    background: #ffebee;
                    border-left: 4px solid #f44336;
                    padding: 1rem;
                    margin: 0.5rem 0;
                  "
                >
                  <h4>üî¥ Contraintes</h4>
                  <ul>
                    <li>
                      <strong>S√©lecteurs :</strong> Utilise UNIQUEMENT les
                      attributs <code>id</code> natifs (jamais de XPath, classes
                      CSS ou texte visible)
                    </li>
                    <li>
                      <strong>Pattern :</strong> Page Object Model strict
                      (s√©lecteurs priv√©s, m√©thodes chainables retournant
                      <code>this</code>)
                    </li>
                    <li>
                      <strong>Erreurs :</strong> Chaque m√©thode doit inclure une
                      v√©rification d'existence avec message explicite
                    </li>
                    <li>
                      <strong>Documentation :</strong> JSDoc obligatoire pour
                      toutes les m√©thodes publiques
                    </li>
                  </ul>
                </div>
              </div>
              <p class="mt-md"><strong>Am√©lioration :</strong></p>
              <ul>
                <li>
                  ‚úÖ S√©lecteurs robustes garantis
                  (<code>cy.get('#username')</code>)
                </li>
                <li>‚úÖ Architecture conforme aux standards de l'√©quipe</li>
                <li>
                  ‚úÖ M√©thodes chainables pour meilleure lisibilit√© des tests
                </li>
                <li>‚úÖ Gestion d'erreurs proactive</li>
              </ul>
            </div>
          </div>

          <div class="card info mt-md">
            <h4>üìã Cat√©gories de Contraintes Efficaces</h4>
            <div class="grid mt-md">
              <div class="card">
                <h4>üéØ Techniques</h4>
                <ul>
                  <li>S√©lecteurs autoris√©s/interdits</li>
                  <li>Versions compatibles</li>
                  <li>Performance (timeout max)</li>
                </ul>
              </div>
              <div class="card">
                <h4>üîí S√©curit√©</h4>
                <ul>
                  <li>Pas de donn√©es PII en dur</li>
                  <li>Credentials via env variables</li>
                  <li>Conformit√© RGPD/PCI DSS</li>
                </ul>
              </div>
              <div class="card">
                <h4>üèóÔ∏è Architecture</h4>
                <ul>
                  <li>Pattern √† respecter (POM)</li>
                  <li>Structure de dossiers</li>
                  <li>Conventions de nommage</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- 2.1.E : FORMAT -->
        <div class="card mt-lg">
          <h3>E. Format : La Structure de Sortie</h3>
          <p>
            Sp√©cifier le format de sortie garantit un r√©sultat
            <strong>directement exploitable</strong> sans post-traitement
            manuel. Voyons les <strong>5 composantes r√©unies</strong> sur un
            exemple diff√©rent : la g√©n√©ration de sc√©narios
            <strong>Gherkin</strong> pour Xray/Jira.
          </p>

          <div class="card highlight mt-md">
            <h4>üéØ Exemple Complet : User Story ‚Üí Sc√©narios Gherkin (BDD)</h4>
            <button class="collapsible-btn" onclick="toggleCollapsible(this)">
              üìã Voir le Prompt Complet avec les 5 Composantes
            </button>
            <div class="collapsible-content">
              <div style="text-align: right; margin-bottom: 0.5rem">
                <button
                  onclick="copyPrompt(this)"
                  style="
                    background: #2196f3;
                    color: white;
                    border: none;
                    padding: 0.5rem 1rem;
                    border-radius: 4px;
                    cursor: pointer;
                    font-size: 0.9em;
                  "
                >
                  üìã Copier le prompt
                </button>
              </div>
              <div
                style="
                  background: #e3f2fd;
                  border-left: 4px solid #2196f3;
                  padding: 1rem;
                  margin: 0.5rem 0;
                "
              >
                <h4>üîµ R√¥le</h4>
                <p>
                  Tu es un Business Analyst et expert QA sp√©cialis√© en BDD
                  (Behavior-Driven Development). Tu ma√Ætrises parfaitement la
                  syntaxe Gherkin et l'int√©gration avec Xray pour Jira. Tu as 10
                  ans d'exp√©rience dans la r√©daction de sc√©narios de tests
                  m√©tier.
                </p>
              </div>

              <div
                style="
                  background: #e8f5e9;
                  border-left: 4px solid #4caf50;
                  padding: 1rem;
                  margin: 0.5rem 0;
                "
              >
                <h4>üü¢ T√¢che</h4>
                <p>
                  Convertis la User Story ci-dessous en
                  <strong>sc√©narios Gherkin complets</strong> couvrant le cas de
                  succ√®s nominal, les cas d'erreur de validation des champs
                  obligatoires, et les cas limites pertinents.
                </p>
              </div>

              <div
                style="
                  background: #fff9c4;
                  border-left: 4px solid #ffeb3b;
                  padding: 1rem;
                  margin: 0.5rem 0;
                "
              >
                <h4>üü° Contexte</h4>
                <p><strong>User Story JIRA-2456 :</strong></p>
                <blockquote
                  style="
                    border-left: 3px solid #999;
                    padding-left: 1rem;
                    color: #555;
                  "
                >
                  "En tant qu'employ√© connect√©, je veux pouvoir saisir le temps
                  pass√© sur mes activit√©s dans Redmine, afin de suivre mon temps
                  de travail par projet et par demande."
                </blockquote>

                <p class="mt-md"><strong>Crit√®res d'acceptation :</strong></p>
                <ul>
                  <li>Le projet doit √™tre s√©lectionn√© (champ obligatoire)</li>
                  <li>
                    La date doit √™tre valide et au format ISO (YYYY-MM-DD)
                  </li>
                  <li>
                    Le nombre d'heures doit √™tre un nombre positif sup√©rieur √† 0
                  </li>
                  <li>
                    L'activit√© doit √™tre s√©lectionn√©e parmi : Design,
                    Development, Test
                  </li>
                  <li>
                    La demande (issue) est <strong>obligatoire</strong> et doit
                    exister dans le projet s√©lectionn√©
                  </li>
                  <li>
                    Le commentaire est <strong>obligatoire</strong> et limit√© √†
                    1024 caract√®res maximum
                  </li>
                  <li>
                    Apr√®s soumission r√©ussie, rediriger vers
                    <code>/time_entries</code>
                  </li>
                </ul>

                <p class="mt-md"><strong>R√®gles m√©tier :</strong></p>
                <ul>
                  <li>
                    Projet manquant ‚Üí Message d'erreur : "Project can't be
                    blank"
                  </li>
                  <li>Issue manquante ‚Üí Message : "Issue can't be blank"</li>
                  <li>Issue inexistante ‚Üí Message : "Issue is invalid"</li>
                  <li>
                    Commentaire manquant ‚Üí Message : "Comments can't be blank"
                  </li>
                  <li>
                    Commentaire > 1024 caract√®res ‚Üí Message : "Comments is too
                    long (maximum is 1024 characters)"
                  </li>
                  <li>
                    Heures = 0 ou n√©gatives ‚Üí Message : "Hours must be greater
                    than 0"
                  </li>
                  <li>
                    Activit√© non s√©lectionn√©e ‚Üí Message : "Activity can't be
                    blank"
                  </li>
                </ul>

                <p class="mt-md">
                  <strong>Voici le code HTML r√©el du formulaire :</strong>
                </p>
                <pre
                  style="
                    background: #1e1e1e;
                    padding: 1rem;
                    border-radius: 4px;
                    overflow-x: auto;
                    font-size: 0.85em;
                  "
                ><code style="color: #d4d4d4;">&lt;form id="new_time_entry" action="/time_entries" method="post"&gt;
  &lt;input type="hidden" name="authenticity_token" value="..." /&gt;
  &lt;input type="hidden" name="back_url" value="/time_entries" /&gt;
  
  &lt;label for="time_entry_project_id"&gt;Projet&lt;span class="required"&gt; *&lt;/span&gt;&lt;/label&gt;
  &lt;select name="time_entry[project_id]" id="time_entry_project_id"&gt;
    &lt;option value=""&gt;&amp;nbsp;&lt;/option&gt;
    &lt;option value="1"&gt;projet1289&lt;/option&gt;
    &lt;option value="2"&gt;Projet1269&lt;/option&gt;
    &lt;!-- ... autres projets ... --&gt;
  &lt;/select&gt;
  
  &lt;label for="time_entry_issue_id"&gt;Demande&lt;/label&gt;
  &lt;input size="6" type="text" id="time_entry_issue_id" class="autocomplete" /&gt;
  
  &lt;label for="time_entry_spent_on"&gt;Date&lt;span class="required"&gt; *&lt;/span&gt;&lt;/label&gt;
  &lt;input type="date" name="time_entry[spent_on]" id="time_entry_spent_on" value="2026-01-05" /&gt;
  
  &lt;label for="time_entry_hours"&gt;Heures&lt;span class="required"&gt; *&lt;/span&gt;&lt;/label&gt;
  &lt;input size="6" type="text" name="time_entry[hours]" id="time_entry_hours" /&gt;
  
  &lt;label for="time_entry_comments"&gt;Commentaire&lt;/label&gt;
  &lt;input size="100" maxlength="1024" type="text" name="time_entry[comments]" id="time_entry_comments" /&gt;
  
  &lt;label for="time_entry_activity_id"&gt;Activit√©&lt;span class="required"&gt; *&lt;/span&gt;&lt;/label&gt;
  &lt;select name="time_entry[activity_id]" id="time_entry_activity_id"&gt;
    &lt;option value=""&gt;--- Choisir ---&lt;/option&gt;
    &lt;option value="8"&gt;Design&lt;/option&gt;
    &lt;option value="9"&gt;Development&lt;/option&gt;
    &lt;option value="10"&gt;Test&lt;/option&gt;
  &lt;/select&gt;
  
  &lt;input type="submit" name="commit" value="Cr√©er" /&gt;
&lt;/form&gt;</code></pre>
              </div>

              <div
                style="
                  background: #ffebee;
                  border-left: 4px solid #f44336;
                  padding: 1rem;
                  margin: 0.5rem 0;
                "
              >
                <h4>üî¥ Contraintes</h4>
                <ul>
                  <li>
                    <strong>Syntaxe :</strong> Utilise UNIQUEMENT les mots-cl√©s
                    ANGLAIS : <code>Feature</code>, <code>Background</code>,
                    <code>Scenario</code>, <code>Given</code>,
                    <code>When</code>, <code>Then</code>, <code>And</code>
                  </li>
                  <li>
                    <strong>Tags Jira :</strong> Chaque sc√©nario doit avoir le
                    tag <code>@JIRA-2456</code> et un tag de priorit√©
                    (<code>@high-priority</code>, <code>@medium-priority</code>)
                  </li>
                  <li>
                    <strong>Donn√©es :</strong> Utilise des exemples r√©alistes
                    (noms de projets, IDs de demandes, dates valides/invalides,
                    nombres d'heures vari√©s)
                  </li>
                  <li>
                    <strong>Atomicit√© :</strong> Chaque sc√©nario doit √™tre
                    ind√©pendant et ex√©cutable seul
                  </li>
                </ul>
              </div>

              <div
                style="
                  background: #f3e5f5;
                  border-left: 4px solid #9c27b0;
                  padding: 1rem;
                  margin: 0.5rem 0;
                "
              >
                <h4>üü£ Format</h4>
                <p>Respecte EXACTEMENT cette structure Gherkin :</p>
                <pre
                  style="
                    background: #f5f5f5;
                    padding: 1rem;
                    border-radius: 4px;
                    font-size: 0.9em;
                  "
                ><code>@JIRA-2456 @time-tracking
Feature: Time Entry Logging in Redmine
  As a logged-in employee
  I want to log time spent on activities
  So that I can track my work time by project and issue

  Background:
    Given I am logged in as "john.doe@company.com"
    And I am on the time entry page "/time_entries/new"
    And the project "Projet1289" with ID "1" exists

  @high-priority @nominal-case
  Scenario: Successfully log time entry with all required fields
    When I select "Projet1289" from the project dropdown
    And I enter issue number "1234" in the issue field
    And I enter "2026-01-05" in the date field
    And I enter "3.5" in the hours field
    And I enter "Completed feature X development" in the comments field
    And I select "Development" from the activity dropdown
    And I click the "Create" button
    Then I should be redirected to "/time_entries"
    And I should see the success message "Time entry created successfully"

  @medium-priority @validation-hours
  Scenario: Fail to log time entry with invalid hours
    When I select "Projet1289" from the project dropdown
    And I enter "0" in the hours field
    [...]</code></pre>
                <p class="mt-md">
                  <strong>Attendu :</strong> Sc√©narios complets avec tags,
                  background, et √©tapes Given/When/Then en ANGLAIS, couvrant
                  tous les cas de validation
                </p>
              </div>
            </div>

            <div class="card success mt-md">
              <h4>‚úÖ R√©sultat Attendu avec les 5 Composantes</h4>
              <p>
                L'IA va g√©n√©rer des sc√©narios Gherkin parfaitement structur√©s :
              </p>
              <ul>
                <li>
                  ‚úÖ <strong>R√¥le :</strong> Vocabulaire m√©tier (pas technique),
                  focus validation fonctionnelle
                </li>
                <li>
                  ‚úÖ <strong>T√¢che :</strong> Sc√©narios complets couvrant cas
                  nominal, erreurs de validation et cas limites (nombre
                  d√©termin√© par l'IA selon les r√®gles m√©tier)
                </li>
                <li>
                  ‚úÖ <strong>Contexte :</strong> Donn√©es r√©alistes tir√©es des
                  crit√®res d'acceptation et du HTML r√©el
                </li>
                <li>
                  ‚úÖ <strong>Contraintes :</strong> Tags Jira pr√©sents, syntaxe
                  ANGLAISE respect√©e (Given/When/Then)
                </li>
                <li>
                  ‚úÖ <strong>Format :</strong> Structure Gherkin identique pour
                  tous les sc√©narios
                </li>
              </ul>
              <p class="mt-md">
                <em
                  >Ces sc√©narios sont pr√™ts √† √™tre import√©s dans Xray et
                  ex√©cut√©s par Cucumber/Cypress-Cucumber.</em
                >
              </p>
            </div>
          </div>

          <div class="card info mt-md">
            <h4>üé® Autres Formats Courants en QA</h4>
            <div class="grid">
              <div class="card">
                <h4>üß™ TypeScript (Cypress)</h4>
                <p>Structure : <code>describe/it/beforeEach</code></p>
                <p>Pattern : Arrange-Act-Assert</p>
              </div>
              <div class="card">
                <h4>üìä JSON (Donn√©es)</h4>
                <p>Cl√©s obligatoires sp√©cifi√©es</p>
                <p>Types de donn√©es explicites</p>
              </div>
              <div class="card">
                <h4>üìã Markdown (Rapport)</h4>
                <p>Sections : Sympt√¥mes / Cause / Solution</p>
                <p>Code fix inclus</p>
              </div>
            </div>
          </div>

          <div class="card warning mt-md">
            <h4>‚ö†Ô∏è Pr√©cision du Format = Qualit√© Garantie</h4>
            <ul>
              <li>
                ‚ùå "Format Gherkin" ‚Üí L'IA pourrait utiliser Given/When/Then en
                fran√ßais ou m√©langer les langues
              </li>
              <li>
                ‚úÖ "Format Gherkin en ANGLAIS avec tags @JIRA-XXX et structure
                Feature/Background/Scenario" ‚Üí Structure exacte garantie
              </li>
            </ul>
          </div>
        </div>
      </section>

      <!-- MODULE 2.2 : LES 3 TECHNIQUES AVANC√âES -->
      <section class="mt-xl">
        <h2>üöÄ Module 2.2 : Les 3 Techniques Avanc√©es (30 min)</h2>

        <!-- 2.2.A : CHAIN-OF-THOUGHT -->
        <div class="card mt-lg">
          <h3>A. Chain-of-Thought : La Pens√©e Logique Explicite</h3>
          <p>
            Le Chain-of-Thought (CoT) demande √† l'IA d'<strong
              >expliciter son raisonnement √©tape par √©tape</strong
            >
            avant de fournir la r√©ponse finale. Crucial pour les probl√®mes
            complexes n√©cessitant une analyse multi-√©tapes.
          </p>

          <div class="card info mt-md">
            <h4>üéØ Quand Utiliser Chain-of-Thought ?</h4>
            <ul>
              <li>Analyser des logs complexes avec √©v√©nements corr√©l√©s</li>
              <li>D√©boguer des tests flaky n√©cessitant analyse de timing</li>
              <li>
                Identifier des causes racines dans des incidents
                multi-composants
              </li>
              <li>
                √âvaluer la robustesse de s√©lecteurs face aux changements UI
              </li>
            </ul>
          </div>

          <h4 class="mt-md">üìã Exemple Concret : Analyse de Logs Redmine</h4>
          <button class="collapsible-btn" onclick="toggleCollapsible(this)">
            üìã Voir le Prompt Chain-of-Thought + Logs
          </button>
          <div class="collapsible-content">
            <div style="text-align: right; margin-bottom: 0.5rem">
              <button
                onclick="copyPrompt(this)"
                style="
                  background: #2196f3;
                  color: white;
                  border: none;
                  padding: 0.5rem 1rem;
                  border-radius: 4px;
                  cursor: pointer;
                  font-size: 0.9em;
                "
              >
                üìã Copier le prompt
              </button>
            </div>
            <div
              style="
                background: #e3f2fd;
                border-left: 4px solid #2196f3;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üîµ R√¥le</h4>
              <p>
                Tu es un expert DevOps sp√©cialis√© dans l'analyse de logs
                d'applications Java/Rails avec une expertise en debugging de
                transactions base de donn√©es.
              </p>
            </div>

            <div
              style="
                background: #e8f5e9;
                border-left: 4px solid #4caf50;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü¢ T√¢che</h4>
              <p>
                Analyse les logs de production Redmine ci-dessous et identifie
                la cause racine de l'erreur HTTP 500.
              </p>
            </div>

            <div
              style="
                background: #fff9c4;
                border-left: 4px solid #ffeb3b;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü° Contexte</h4>
              <p>
                Application : Redmine 5.x (Ruby on Rails + PostgreSQL)<br />
                Environnement : Production, charge normale (20 req/s)<br />
                Utilisateur affect√© : admin@company.com<br />
                Action tent√©e : Modification du nom d'un projet via PATCH
                /projects/test-modify.json
              </p>

              <h5 class="mt-md">Logs de Production (extrait 30 secondes) :</h5>
              <pre
                style="
                  background: #1e1e1e;
                  padding: 1rem;
                  border-radius: 4px;
                  overflow-x: auto;
                  font-size: 0.85em;
                "
              ><code style="color: #d4d4d4;">[2025-11-02T14:35:12.500Z] INFO  [c0a1d4f2] - Request received: GET /issues/list.json?project_id=42
[2025-11-02T14:35:12.501Z] DEBUG [c0a1d4f2] - SQL: SELECT * FROM issues WHERE project_id = 42 LIMIT 25
[2025-11-02T14:35:12.550Z] INFO  [c0a1d4f2] - Response sent: 200 OK (50ms)

[2025-11-02T14:35:12.601Z] INFO  [a9f3b2d1] - Request received: PATCH /projects/test-modify.json
[2025-11-02T14:35:12.602Z] DEBUG [a9f3b2d1] - Authenticated user: admin@company.com (role: admin)
[2025-11-02T14:35:12.605Z] DEBUG [a9f3b2d1] - Payload: {"project": {"name": "New Project Name"}}
[2025-11-02T14:35:12.610Z] DEBUG [a9f3b2d1] - SQL: BEGIN TRANSACTION
[2025-11-02T14:35:12.620Z] DEBUG [a9f3b2d1] - SQL: UPDATE projects SET name='New Project Name' WHERE id=42
[2025-11-02T14:35:12.750Z] DEBUG [a9f3b2d1] - Update affected 1 row
[2025-11-02T14:35:12.755Z] DEBUG [a9f3b2d1] - Triggering before_save callback: update_activity_timestamp
[2025-11-02T14:35:12.760Z] WARN  [a9f3b2d1] - Callback update_activity_timestamp attempting to set 'updated_on' but column is NULL
[2025-11-02T14:35:12.765Z] DEBUG [a9f3b2d1] - SQL: UPDATE projects SET updated_on=NULL WHERE id=42
[2025-11-02T14:35:12.789Z] ERROR [a9f3b2d1] - ActiveRecord::StatementInvalid: PG::NotNullViolation: ERROR: null value in column "updated_on" violates not-null constraint
[2025-11-02T14:35:12.790Z] ERROR [a9f3b2d1] - DETAIL: Failing row contains (42, New Project Name, NULL, ...)
[2025-11-02T14:35:12.795Z] DEBUG [a9f3b2d1] - SQL: ROLLBACK TRANSACTION
[2025-11-02T14:35:12.800Z] WARN  [a9f3b2d1] - Transaction rolled back successfully
[2025-11-02T14:35:12.805Z] WARN  [a9f3b2d1] - Could not commit transaction. Retrying logic failed.
[2025-11-02T14:35:12.850Z] ERROR [a9f3b2d1] - HTTP 500 Internal Server Error sent to client
[2025-11-02T14:35:12.851Z] INFO  [a9f3b2d1] - Request completed: PATCH /projects/test-modify.json (250ms, status: 500)

[2025-11-02T14:35:13.100Z] INFO  [d4e5f6g7] - Request received: GET /projects/42.json
[2025-11-02T14:35:13.150Z] DEBUG [d4e5f6g7] - SQL: SELECT * FROM projects WHERE id = 42
[2025-11-02T14:35:13.155Z] DEBUG [d4e5f6g7] - Result: name='Old Project Name' (unchanged due to rollback)
[2025-11-02T14:35:13.200Z] INFO  [d4e5f6g7] - Response sent: 200 OK (100ms)

[2025-11-02T14:35:14.000Z] INFO  [e8f9g0h1] - Request received: POST /issues.json
[2025-11-02T14:35:14.050Z] INFO  [e8f9g0h1] - Response sent: 201 Created (50ms)</code></pre>
            </div>

            <div
              style="
                background: #ffebee;
                border-left: 4px solid #f44336;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üî¥ Contraintes</h4>
              <p>
                <strong
                  >Avant de donner la r√©ponse finale, d√©cris ton raisonnement
                  √©tape par √©tape en analysant :</strong
                >
              </p>
              <ul>
                <li>
                  Les requ√™tes concurrentes (identifie tous les IDs de
                  transaction)
                </li>
                <li>
                  Les timestamps et corr√©lations d'ID de transaction pour isoler
                  la s√©quence d'erreur
                </li>
                <li>
                  La s√©quence d'√©v√©nements menant √† l'erreur (de BEGIN √†
                  ROLLBACK)
                </li>
                <li>Les contraintes de base de donn√©es impliqu√©es</li>
                <li>Le callback probl√©matique et sa logique d√©faillante</li>
              </ul>
            </div>

            <div
              style="
                background: #f3e5f5;
                border-left: 4px solid #9c27b0;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü£ Format</h4>
              <p>Structure la r√©ponse ainsi :</p>
              <pre
                style="background: #f5f5f5; padding: 1rem; border-radius: 4px"
              ><code>## üîç Raisonnement √âtape par √âtape

### √âtape 1 : Identification des Transactions
[Liste des IDs + types de requ√™tes]

### √âtape 2 : Reconstitution Chronologique
[Timeline de la transaction a9f3b2d1]

### √âtape 3 : Analyse de l'Erreur
[Explication du callback d√©faillant]

### √âtape 4 : V√©rification du Rollback
[Confirmation que rien n'a √©t√© committ√©]

## üéØ Cause Racine
[R√©ponse finale concise]

## üõ†Ô∏è Solution Propos√©e
[Code fix]</code></pre>
            </div>
          </div>

          <div class="card success mt-md">
            <h4>‚úÖ R√©sultat Attendu avec Chain-of-Thought</h4>
            <p>L'IA va d√©composer l'analyse :</p>
            <ol>
              <li>
                <strong>Identification :</strong> 4 transactions concurrentes
                (c0a1d4f2, a9f3b2d1, d4e5f6g7, e8f9g0h1)
              </li>
              <li>
                <strong>Chronologie :</strong> a9f3b2d1 est la transaction
                probl√©matique (PATCH project)
              </li>
              <li>
                <strong>S√©quence :</strong> BEGIN ‚Üí UPDATE projects ‚Üí Callback ‚Üí
                tentative SET updated_on=NULL ‚Üí violation contrainte
              </li>
              <li>
                <strong>Cause racine :</strong> Le callback
                <code>update_activity_timestamp</code> tente d'√©crire NULL dans
                une colonne NOT NULL
              </li>
              <li>
                <strong>Solution :</strong> Fixer le callback pour utiliser
                <code>Time.current</code> au lieu de NULL
              </li>
            </ol>
          </div>
        </div>

        <!-- 2.2.B : FEW-SHOT PROMPTING -->
        <div class="card mt-lg">
          <h3>B. Few-Shot Prompting : L'Exemple Ma√Ætre</h3>
          <p>
            Le Few-Shot Prompting consiste √†
            <strong>fournir 2-5 exemples concrets</strong> du format/style
            attendu avant de demander la g√©n√©ration. L'IA apprend le pattern par
            imitation.
          </p>

          <div class="card info mt-md">
            <h4>üéØ Quand Utiliser Few-Shot ?</h4>
            <ul>
              <li>
                G√©n√©rer des donn√©es de test suivant un format complexe (IBAN,
                SIRET, NIR)
              </li>
              <li>
                Cr√©er des sc√©narios Gherkin conformes aux conventions de
                l'√©quipe
              </li>
              <li>Produire des fixtures JSON avec structure sp√©cifique</li>
              <li>
                √âcrire des tests suivant un template maison (pas AAA standard)
              </li>
            </ul>
          </div>

          <h4 class="mt-md">üìã Exemple Concret : G√©n√©ration de Donn√©es IBAN</h4>
          <button class="collapsible-btn" onclick="toggleCollapsible(this)">
            üìã Voir le Prompt Few-Shot + Exemples
          </button>
          <div class="collapsible-content">
            <div style="text-align: right; margin-bottom: 0.5rem">
              <button
                onclick="copyPrompt(this)"
                style="
                  background: #2196f3;
                  color: white;
                  border: none;
                  padding: 0.5rem 1rem;
                  border-radius: 4px;
                  cursor: pointer;
                  font-size: 0.9em;
                "
              >
                üìã Copier le prompt
              </button>
            </div>
            <div
              style="
                background: #e3f2fd;
                border-left: 4px solid #2196f3;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üîµ R√¥le</h4>
              <p>
                Tu es un expert en g√©n√©ration de donn√©es de test financi√®res
                conformes aux standards europ√©ens (SEPA, ISO 13616).
              </p>
            </div>

            <div
              style="
                background: #e8f5e9;
                border-left: 4px solid #4caf50;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü¢ T√¢che</h4>
              <p>
                G√©n√®re 10 exemples de donn√©es de test IBAN : 5 cas valides et 5
                cas invalides, en respectant EXACTEMENT le format JSON des
                exemples ci-dessous.
              </p>
            </div>

            <div
              style="
                background: #fff9c4;
                border-left: 4px solid #ffeb3b;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü° Contexte</h4>
              <p><strong>R√®gles IBAN par Pays :</strong></p>
              <ul>
                <li>
                  France (FR) : 27 caract√®res (FR + 2 chiffres contr√¥le + 23
                  chiffres)
                </li>
                <li>
                  Allemagne (DE) : 22 caract√®res (DE + 2 chiffres contr√¥le + 18
                  chiffres)
                </li>
                <li>
                  Belgique (BE) : 16 caract√®res (BE + 2 chiffres contr√¥le + 12
                  chiffres)
                </li>
              </ul>

              <p>
                <strong>Algorithme Checksum :</strong> Modulo 97 sur conversion
                alphanum√©rique
              </p>

              <h5 class="mt-md">Exemples de Format Souhait√© :</h5>
              <pre
                style="background: #f5f5f5; padding: 1rem; border-radius: 4px"
              ><code>{
  "iban": "FR7630006000011234567890189",
  "pays": "France",
  "valide": true,
  "raison": "IBAN fran√ßais valide avec checksum correct (76)"
}

{
  "iban": "FR7630006000011234567890188",
  "pays": "France",
  "valide": false,
  "raison": "Checksum incorrect (devrait √™tre 76, pas 88)"
}

{
  "iban": "DE891234567890123456",
  "pays": "Allemagne",
  "valide": false,
  "raison": "Longueur invalide pour l'Allemagne (20 caract√®res au lieu de 22)"
}</code></pre>
            </div>

            <div
              style="
                background: #ffebee;
                border-left: 4px solid #f44336;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üî¥ Contraintes</h4>
              <ul>
                <li>
                  Suivre <strong>EXACTEMENT</strong> le format JSON des exemples
                  (4 cl√©s : iban, pays, valide, raison)
                </li>
                <li>Inclure au moins 5 cas valides et 5 cas invalides</li>
                <li>
                  Varier les raisons d'invalidit√© : checksum incorrect, longueur
                  invalide, caract√®res non-alphanum√©riques, code pays inconnu
                </li>
                <li>
                  Pour les cas valides, calculer r√©ellement le bon checksum (ou
                  utiliser des IBANs tests officiels)
                </li>
              </ul>
            </div>

            <div
              style="
                background: #f3e5f5;
                border-left: 4px solid #9c27b0;
                padding: 1rem;
                margin: 0.5rem 0;
              "
            >
              <h4>üü£ Format</h4>
              <p>
                Array JSON de 10 objets, chacun avec les 4 cl√©s obligatoires :
                iban, pays, valide, raison
              </p>
            </div>
          </div>

          <div class="card success mt-md">
            <h4>‚úÖ R√©sultat Attendu avec Few-Shot</h4>
            <p>
              L'IA va g√©n√©rer 10 cas en suivant scrupuleusement le pattern des 3
              exemples :
            </p>
            <ul>
              <li>M√™me structure JSON (4 cl√©s identiques)</li>
              <li>M√™me niveau de d√©tail dans <code>raison</code></li>
              <li>Respect des longueurs par pays</li>
              <li>Checksums r√©alistes (valides ou avec erreur explicite)</li>
            </ul>
            <p>
              <em
                >Sans Few-Shot, l'IA pourrait inventer des cl√©s diff√©rentes
                (<code>valid</code> au lieu de <code>valide</code>,
                <code>country</code> au lieu de <code>pays</code>) ou omettre
                <code>raison</code>.</em
              >
            </p>
          </div>
        </div>

        <!-- 2.2.C : PROMPT CHAINING -->
        <div class="card mt-lg">
          <h3>C. Prompt Chaining : D√©composer en Sous-Prompts</h3>
          <p>
            Le Prompt Chaining consiste √†
            <strong
              >d√©composer une t√¢che complexe en plusieurs prompts
              s√©quentiels</strong
            >, o√π la sortie de l'un devient l'entr√©e du suivant. Utile quand une
            seule g√©n√©ration produit du code incoh√©rent ou incomplet.
          </p>

          <div class="card info mt-md">
            <h4>üéØ Quand Utiliser Prompt Chaining ?</h4>
            <ul>
              <li>
                G√©n√©rer un test E2E complet n√©cessitant setup + test + teardown
              </li>
              <li>
                Cr√©er une suite de tests o√π chaque test d√©pend des donn√©es du
                pr√©c√©dent
              </li>
              <li>
                Refactorer du code en plusieurs √©tapes (extraction ‚Üí renommage ‚Üí
                optimisation)
              </li>
              <li>G√©n√©rer documentation puis code √† partir de cette doc</li>
            </ul>
          </div>

          <h4 class="mt-md">üìã Exemple Concret : Test E2E avec Setup API</h4>
          <p>
            Objectif : G√©n√©rer un test complet pour "Modifier le nom d'un projet
            Redmine"
          </p>

          <div class="grid mt-md">
            <div class="card" style="background: #e3f2fd">
              <h4>√âtape 1Ô∏è‚É£ : Setup (Cr√©ation Projet)</h4>
              <p><strong>Prompt :</strong></p>
              <pre
                style="
                  background: #fff;
                  padding: 0.5rem;
                  border-radius: 4px;
                  font-size: 0.85em;
                "
              ><code>G√©n√®re une fonction TypeScript 
`createProjectAPI(name: string)` 
qui cr√©e un projet Redmine via 
POST /projects.json et retourne 
l'ID du projet cr√©√©.</code></pre>
              <p>
                <strong>Sortie :</strong> Fonction r√©utilisable avec gestion
                d'erreurs
              </p>
            </div>

            <div class="card" style="background: #e8f5e9">
              <h4>√âtape 2Ô∏è‚É£ : Test (Modification UI)</h4>
              <p><strong>Prompt :</strong></p>
              <pre
                style="
                  background: #fff;
                  padding: 0.5rem;
                  border-radius: 4px;
                  font-size: 0.85em;
                "
              ><code>G√©n√®re un test Cypress qui :
1. Utilise createProjectAPI() 
   pour cr√©er "Test Project"
2. Modifie le nom via UI
3. V√©rifie la modification via 
   GET /projects/:id.json

Contexte : Voici la fonction 
createProjectAPI() :
[coller la sortie de l'√©tape 1]</code></pre>
              <p>
                <strong>Sortie :</strong> Test E2E complet avec setup API +
                assertions
              </p>
            </div>

            <div class="card" style="background: #fff9c4">
              <h4>√âtape 3Ô∏è‚É£ : Teardown (Nettoyage)</h4>
              <p><strong>Prompt :</strong></p>
              <pre
                style="
                  background: #fff;
                  padding: 0.5rem;
                  border-radius: 4px;
                  font-size: 0.85em;
                "
              ><code>Ajoute un afterEach() au test 
qui supprime le projet cr√©√© via 
DELETE /projects/:id.json

Contexte : Voici le test actuel :
[coller la sortie de l'√©tape 2]</code></pre>
              <p>
                <strong>Sortie :</strong> Test complet avec cleanup automatique
              </p>
            </div>
          </div>

          <div class="card success mt-md">
            <h4>‚úÖ Avantages du Chaining</h4>
            <ul>
              <li>
                <strong>Qualit√© :</strong> Chaque √©tape est focalis√©e, donc
                mieux r√©alis√©e
              </li>
              <li>
                <strong>R√©utilisabilit√© :</strong> La fonction
                <code>createProjectAPI()</code> peut servir √† d'autres tests
              </li>
              <li>
                <strong>Contr√¥le :</strong> Vous validez chaque √©tape avant de
                passer √† la suivante
              </li>
              <li>
                <strong>Debugging :</strong> Si erreur, facile d'identifier
                quelle √©tape a √©chou√©
              </li>
            </ul>
          </div>

          <div class="card warning mt-md">
            <h4>‚ö†Ô∏è Chaining vs Prompt Unique</h4>
            <p>Demander tout en un seul prompt produit souvent :</p>
            <ul>
              <li>‚ùå Code monolithique difficile √† maintenir</li>
              <li>‚ùå Setup/teardown oubli√©s ou incomplets</li>
              <li>‚ùå Gestion d'erreurs absente</li>
            </ul>
            <p>Le chaining force une architecture modulaire et compl√®te.</p>
          </div>
        </div>
      </section>

      <!-- MESSAGE CL√â FINAL -->
      <section class="card warning mt-xl">
        <h2>üéØ Le Message Cl√© de cette Section</h2>
        <p>
          Vous ma√Ætrisez maintenant les fondamentaux du Prompt Engineering pour
          la QA :
        </p>
        <ul>
          <li>
            ‚úÖ <strong>Les 5 composantes</strong> : R√¥le, T√¢che, Contexte,
            Contraintes, Format
          </li>
          <li>
            ‚úÖ <strong>Chain-of-Thought</strong> : "Explique ton raisonnement
            √©tape par √©tape" pour analyses complexes
          </li>
          <li>
            ‚úÖ <strong>Few-Shot</strong> : "Voici 3 exemples" pour garantir un
            format pr√©cis
          </li>
          <li>
            ‚úÖ <strong>Prompt Chaining</strong> : D√©composer en sous-prompts
            (Setup ‚Üí Test ‚Üí Teardown)
          </li>
        </ul>
        <p class="mt-md">
          <strong>Prochaine √©tape :</strong> Appliquer ces techniques √† des cas
          r√©els (g√©n√©ration tests, debugging, RAG)
        </p>
      </section>

      <!-- NAVIGATION -->
      <div class="navigation mt-xl">
        <a href="../section-1/index.html" class="btn-secondary">‚Üê Section 1</a>
        <a href="../section-3/index.html" class="btn-primary"
          >Section 3 : IA et Outillage QA ‚Üí</a
        >
      </div>
    </main>

    <footer>
      <p>Formation GitHub Copilot pour QA - Section 2/4</p>
      <p>üéì Masterclass Prompt Engineering</p>
    </footer>

    <script>
      function toggleCollapsible(button) {
        button.classList.toggle("active");
        const content = button.nextElementSibling;
        content.classList.toggle("active");
      }

      function copyPrompt(button) {
        // R√©cup√®re le contenu du prompt (tous les textes dans les divs color√©es + le texte additionnel)
        const promptContainer = button.closest(".collapsible-content");

        // Clone le container pour manipulation sans affecter l'affichage
        const clone = promptContainer.cloneNode(true);

        // Retire le bouton de copie du clone
        const copyBtn = clone.querySelector("button");
        if (copyBtn) copyBtn.remove();

        // Extrait tout le texte
        let fullPrompt = clone.innerText.trim();

        // Copie dans le presse-papiers
        navigator.clipboard
          .writeText(fullPrompt)
          .then(() => {
            // Feedback visuel
            const originalText = button.innerHTML;
            button.innerHTML = "‚úÖ Copi√© !";
            button.style.background = "#4caf50";

            setTimeout(() => {
              button.innerHTML = originalText;
              button.style.background = "#2196f3";
            }, 2000);
          })
          .catch((err) => {
            console.error("Erreur de copie:", err);
            alert("Erreur lors de la copie. Utilisez Ctrl+C manuellement.");
          });
      }
    </script>
  </body>
</html>
